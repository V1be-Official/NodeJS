(this.webpackJsonpfilestorage=this.webpackJsonpfilestorage||[]).push([[0],{1:function(e,t,a){e.exports={container:"AuthModals_container__1EDxK",showContainer:"AuthModals_showContainer__2P2N-",modal:"AuthModals_modal__4r_g-",showModal:"AuthModals_showModal__3eKTe",successButton:"AuthModals_successButton__5H0dZ",title:"AuthModals_title__3A93F",form:"AuthModals_form__2AVwl",inputContainer:"AuthModals_inputContainer__2A6P9",fieldError:"AuthModals_fieldError__83fDE",input:"AuthModals_input__3eccc",actions:"AuthModals_actions__235SL",link:"AuthModals_link__3feHK",row:"AuthModals_row__25BwT",spaceBetween:"AuthModals_spaceBetween__3NHYI"}},111:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),s=a.n(c),o=(a(59),a(60),a(61),a(16)),i=a(5),l=a(9),u=a.n(l),m=u.a,p=a(49),f=a.n(p),d=function(e){var t=e.className,a=e.children,n=e.style;return r.a.createElement("div",{className:m(t,f.a.screen),style:n},a)},b=a(50),v=a.n(b),_=a(20),E=a(6),h=a.n(E),w=a(14),k=a(10),O=a(1),g=a.n(O),N=a(25),j=a.n(N),x=a(54),F=a(34),T=a.n(F),S=function(e){var t=e.as,a=void 0===t?"button":t,n=e.theme,c=void 0===n?"success":n,s=Object(x.a)(e,["as","theme"]);return r.a.createElement(a,Object.assign({},s,{className:m(T.a.button,T.a[c],s.className)}))},A=a(21),y=a(3),C=function(e){document.title=e};function I(e){var t=e.currentTarget,a=new FormData(t),n={};return Array.from(a.entries()).forEach((function(e){var t=Object(k.a)(e,2),a=t[0],r=t[1];n[a]=r.toString()})),n}var L,M="/",B="/login",P="/registration",R="/404",D=a(51),U=a.n(D).a.create({baseURL:"http://46.101.182.162/api"});!function(e){var t;!function(e){var t;t||(t=e.Requests||(e.Requests={}))}(t||(t=e.Types||(e.Types={}))),e.refreshToken=function(e){return U.post("/refreshToken",e)},e.register=function(e){return U.post("/register",e)},e.login=function(e){return U.post("/login",e)},e.getUserData=function(e){return U.post("/getUserData",e)},e.checkSession=function(e){return U.post("/checkSession",e)},e.getListFiles=function(e){return U.post("/getListFiles",e)},e.downloadFile=function(e){return U.post("/downloadFile",e,{responseType:"blob"})},e.uploadFile=function(e){return U.post("/uploadFile",e,{headers:{"Content-Type":"multipart/form-data"}})}}(L||(L={}));var z,X=a(17),J=a(23),H=a(33);!function(e){var t,a;a||(a=e.Types||(e.Types={}));var n,r;e.InitialState={token:null};(r=n||(n=e.Actions||(e.Actions={}))).saveToken=Object(H.a)("Save authentication token"),r.removeToken=Object(H.a)("Delete authentication token");e.Reducer=Object(H.b)(z.InitialState,(t={},Object(J.a)(t,z.Actions.saveToken.type,(function(e,t){var a=t.payload;e.token=a})),Object(J.a)(t,z.Actions.removeToken.type,(function(e){e.token=z.InitialState.token})),t))}(z||(z={}));var K=function(e){return function(){var t=Object(w.a)(h.a.mark((function t(a){var n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=8;break}return t.next=3,L.refreshToken({token:e});case 3:return n=t.sent,r=n.data,a(z.Actions.saveToken(r)),localStorage.setItem("sessionToken",r),t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function V(){var e=Object(_.a)(["\n                              margin-left: 10px;\n                            "]);return V=function(){return e},e}var q=function(){var e=Object(n.useState)(!1),t=Object(k.a)(e,2),a=t[0],c=t[1],s=Object(i.g)(),l=Object(X.b)(),m=function(){var e=Object(w.a)(h.a.mark((function e(t){var a,n,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.persist(),t.preventDefault(),e.prev=2,c(!0),a=I(t),e.next=7,L.login(a);case 7:return n=e.sent,r=n.data,e.next=11,l(K(r));case 11:return o=e.sent,localStorage.setItem("sessionToken",o),s.push(M),e.abrupt("return");case 17:e.prev=17,e.t0=e.catch(2),console.error(e.t0),c(!1);case 21:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}(),p=Object(n.useMemo)((function(){return a?{userSelect:"none",pointerEvents:"none"}:{}}),[a]);return Object(n.useEffect)((function(){var e=document.title;return C(he.defaultTitle+" - \u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),function(){C(e)}}),[]),r.a.createElement("div",{className:g.a.modal,style:p},r.a.createElement("h3",{className:g.a.title},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement("form",{className:g.a.form,noValidate:!0,onSubmit:m,autoSave:"true"},r.a.createElement("div",{className:g.a.inputContainer},r.a.createElement("input",{className:u()(g.a.input,j.a.usernameInput),type:"text",name:"username",placeholder:"\u041b\u043e\u0433\u0438\u043d"})),r.a.createElement("div",{className:g.a.inputContainer},r.a.createElement("input",{className:u()(g.a.input,j.a.passwordInput),type:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"})),r.a.createElement("div",{className:u()(g.a.row,g.a.spaceBetween,g.a.actions)},r.a.createElement(o.b,{to:"/registration",className:u()(g.a.link,j.a.toRegistration)},"\u041d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430?"),r.a.createElement(S,{className:u()(g.a.successButton,j.a.submitButton),disabled:a},"\u0412\u043e\u0439\u0442\u0438",r.a.createElement(A.ClipLoader,{size:14,color:"#ffffff",loading:a,css:Object(y.css)(V())})))))},Z=a(53),Y=a(18),$=a.n(Y),G=function(e){var t={};return Object.entries(e).forEach((function(a){var n,r=Object(k.a)(a,2),c=r[0],s=r[1];switch(c){case"repeatPassword":n=s,e.password!==n&&(t.repeatPassword={data:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0442"});break;case"password":(function(e){return e.length>6})(s)||(t.password={data:"\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c"});break;case"username":(function(e){return/^[a-zA-Z1-9]+$/.test(e)&&e.length>4})(s)||(t.username={data:"\u041b\u043e\u0433\u0438\u043d \u043d\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c"});break;case"email":(function(e){return/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)})(s)||(t.email={data:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u043f\u043e\u0447\u0442\u044b"})}})),t};function Q(){var e=Object(_.a)(["\n                              margin-left: 10px;\n                            "]);return Q=function(){return e},e}var W=function(e){var t=Object(n.useState)(!1),a=Object(k.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)({}),m=Object(k.a)(l,2),p=m[0],f=m[1],d=Object(i.g)(),b=function(){var e=Object(w.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=I(t),n=G(a),!(Object.keys(n).length>0)){e.next=7;break}f(n),e.next=19;break;case 7:return e.prev=7,s(!0),e.next=11,L.register({username:a.username,password:a.password,email:a.email});case 11:d.push(B),s(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),console.error(e.t0),s(!1);case 19:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}(),v=Object(n.useMemo)((function(){return c?{userSelect:"none",pointerEvents:"none"}:{}}),[c]);return Object(n.useEffect)((function(){var e=document.title;return C(he.defaultTitle+" - \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),function(){C(e)}}),[]),r.a.createElement("div",{className:g.a.modal,style:v},r.a.createElement("h3",{className:g.a.title},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("form",{className:g.a.form,onSubmit:b,noValidate:!0,onChange:function(e){var t=e.target.name;if(p[t]){var a=Object(Z.a)({},p);delete a[t],f(a)}}},r.a.createElement("div",{className:g.a.inputContainer},p.email&&r.a.createElement("span",{className:g.a.fieldError},p.email.data),r.a.createElement("input",{className:u()(g.a.input,$.a.emailInput),type:"text",name:"email",placeholder:"\u041f\u043e\u0447\u0442\u0430: example@mail.com"})),r.a.createElement("div",{className:g.a.inputContainer},p.username&&r.a.createElement("span",{className:g.a.fieldError},p.username.data),r.a.createElement("input",{className:u()(g.a.input,$.a.usernameInput),type:"text",name:"username",placeholder:"\u041b\u043e\u0433\u0438\u043d"})),r.a.createElement("div",{className:g.a.inputContainer},p.password&&r.a.createElement("span",{className:g.a.fieldError},p.password.data),r.a.createElement("input",{className:u()(g.a.input,$.a.passwordInput),type:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"})),r.a.createElement("div",{className:g.a.inputContainer},p.repeatPassword&&r.a.createElement("span",{className:g.a.fieldError},p.repeatPassword.data),r.a.createElement("input",{className:u()(g.a.input,$.a.repeatPasswordInput),type:"password",name:"repeatPassword",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})),r.a.createElement("div",{className:u()(g.a.row,g.a.spaceBetween,g.a.actions)},r.a.createElement(o.b,{to:"/login",className:u()(g.a.link,$.a.toLogin)},"\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?"),r.a.createElement(S,{className:u()(g.a.successButton,$.a.submitButton),disabled:c},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",r.a.createElement(A.ClipLoader,{size:14,color:"#ffffff",loading:c,css:Object(y.css)(Q())})))))},ee=function(e){return r.a.createElement(d,{className:v.a.container},r.a.createElement(i.d,null,r.a.createElement(i.b,{path:B,component:q,exact:!0}),r.a.createElement(i.b,{path:P,component:W,exact:!0})))},te=function(e){return r.a.createElement(d,null,"404")},ae=a(15),ne=a.n(ae);function re(){var e=Object(_.a)(["\n                              margin-top: 10px;\n                            "]);return re=function(){return e},e}var ce=function(e){return r.a.createElement("div",{className:ne.a.container},r.a.createElement("div",{className:ne.a.mainTitle},"\u0421\u043f\u0438\u0441\u043e\u043a \u0444\u0430\u0439\u043b\u043e\u0432:"),e.isLoading?r.a.createElement(A.ClipLoader,{size:25,color:"#15FF73",loading:e.isLoading,css:Object(y.css)(re())}):r.a.createElement("div",{className:ne.a.list},e.data.map((function(t){return r.a.createElement("div",{key:t.filename,className:ne.a.mainRow,onClick:function(){return function(t){e.onRowClick(t)}(t)}},r.a.createElement("div",{className:ne.a.row},r.a.createElement("span",{className:ne.a.filename},t.filename),r.a.createElement("span",{className:ne.a.timestamp},new Date(t.timestamp).toLocaleString())),r.a.createElement("div",{className:ne.a.row},t.comment&&r.a.createElement("span",{className:ne.a.comment},"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439: ",r.a.createElement("br",null),r.a.createElement("span",null,t.comment))))}))))},se=a(7),oe=Object(se.c)({auth:z.Reducer}),ie=a(24),le=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||se.d;var ue=Object(se.e)(oe,le(Object(se.a)(ie.a))),me=function e(){return function(){var t=Object(w.a)(h.a.mark((function t(a,n){var r,c,s,o,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=n().auth.token)){t.next=19;break}return t.prev=2,t.next=5,L.getListFiles({token:r});case 5:return c=t.sent,t.abrupt("return",c.data);case 9:if(t.prev=9,t.t0=t.catch(2),s=t.t0.response.data,o=s.code,i=s.message,"EXPIRATION_OUT"!==o){t.next=18;break}return t.next=15,a(K(r));case 15:return t.abrupt("return",a(e()));case 18:console.error(i);case 19:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,a){return t.apply(this,arguments)}}()},pe=a(32),fe=a.n(pe),de=function(e){var t=e.onUploadFiles,a=e.attachedFile,n=e.children;return r.a.createElement("div",{className:fe.a.container},r.a.createElement(S,{as:"label",className:fe.a.label},n,r.a.createElement("input",{type:"file",onChange:function(e){t(e.currentTarget.files,e),e.currentTarget.value=""}})),a?r.a.createElement("span",{className:fe.a.attachedFileName},"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b: ",r.a.createElement("span",null,a.name)):null)},be=a(26),ve=a.n(be),_e=function(e){var t=Object(X.b)(),a=Object(X.c)((function(e){return e.auth.token})),c=Object(i.g)(),s=Object(n.useState)(!1),o=Object(k.a)(s,2),l=o[0],u=o[1],m=Object(n.useRef)(!1),p=Object(n.useState)([]),f=Object(k.a)(p,2),d=f[0],b=f[1],v=Object(n.useState)(""),_=Object(k.a)(v,2),E=_[0],O=_[1],g=Object(n.useState)(null),N=Object(k.a)(g,2),j=N[0],x=N[1],F=Object(n.useState)({value:"",timer:null}),T=Object(k.a)(F,2),A=T[0],y=T[1],C=function(e){null!==A.timer&&clearTimeout(A.timer),y({value:e,timer:setTimeout((function(){y({value:"",timer:null})}),3e3)})},I=Object(n.useCallback)(Object(w.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}return u(!0),e.next=4,t(me());case 4:n=e.sent,u(!1),b(n),m.current=!0;case 8:case"end":return e.stop()}}),e)}))),[a,t]),M=function(){var e=Object(w.a)(h.a.mark((function e(n){var r,c,s,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.downloadFile({token:a,filename:n.filename});case 3:r=e.sent,c=r.data,(s=document.createElement("a")).download=n.filename,(o=new FileReader).readAsDataURL(c),o.onload=function(){s.href=o.result,s.click()},e.next=22;break;case 12:if(e.prev=12,e.t0=e.catch(0),"EXPIRATION_OUT"!==(i=e.t0.response.data).code){e.next=21;break}return e.next=18,t(K(a));case 18:return e.next=20,M(n);case 20:return e.abrupt("return");case 21:console.error(i.message);case 22:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(w.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}if(!((a=t[0]).size>20971520)){e.next=5;break}return C("\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 20\u041c\u0431"),e.abrupt("return");case 5:x(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(w.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=3;break}return C("\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u0435 \u0444\u0430\u0439\u043b!"),e.abrupt("return");case 3:return e.prev=3,(n=new FormData).append("token",ue.getState().auth.token),n.append("comment",E),n.append("file",j),e.next=10,L.uploadFile(n);case 10:return e.next=12,I();case 12:x(null),O(""),e.next=25;break;case 16:if(e.prev=16,e.t0=e.catch(3),"EXPIRATION_OUT"!==e.t0.response.data.code){e.next=25;break}return e.next=22,t(K(a));case 22:return e.next=24,R();case 24:return e.abrupt("return");case 25:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(!a){var e=localStorage.getItem("sessionToken");e?L.checkSession({token:e}).then((function(){t(z.Actions.saveToken(e))})).catch((function(){localStorage.removeItem("sessionToken"),c.push(B)})):c.push(B)}}),[c,a,t]),Object(n.useEffect)((function(){I()}),[I]),r.a.createElement("div",{className:ve.a.screen},r.a.createElement(ce,{data:d,onRowClick:M,isLoading:l}),r.a.createElement(de,{onUploadFiles:P,attachedFile:j},"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u0444\u0430\u0439\u043b"),r.a.createElement("textarea",{className:ve.a.commentField,value:E,onChange:function(e){return t=e.currentTarget.value,void O(t);var t},placeholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),r.a.createElement(S,{onClick:R,className:ve.a.sendFileButton},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"),A.value&&r.a.createElement("span",{className:ve.a.error},A.value))},Ee=function(){return r.a.createElement(o.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:M,component:_e,exact:!0}),r.a.createElement(i.b,{path:[B,P],component:ee,exact:!0}),r.a.createElement(i.b,{render:function(){return r.a.createElement(i.a,{to:R})}})),r.a.createElement(i.b,{path:R,exact:!0,component:te}))},he={defaultTitle:"File Storage"};var we=function(){return r.a.createElement(X.a,{store:ue},r.a.createElement(Ee,null))},ke=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,112)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(we,null)),document.getElementById("root")),ke()},15:function(e,t,a){e.exports={container:"FilesList_container__3J2z0",list:"FilesList_list__3eNp2",mainTitle:"FilesList_mainTitle__1AP2Q",mainRow:"FilesList_mainRow__3Azsr",row:"FilesList_row__cX2gy",filename:"FilesList_filename__15J-E",timestamp:"FilesList_timestamp__OKYpj",comment:"FilesList_comment__Ztbqr"}},18:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){e.exports={screen:"MainPage_screen__3BPIA",sendFileButton:"MainPage_sendFileButton__2bAI1",error:"MainPage_error__15Fi8",commentField:"MainPage_commentField__2Cghg"}},32:function(e,t,a){e.exports={container:"UploadFileButton_container__3iEso",label:"UploadFileButton_label__1t-kJ",attachedFileName:"UploadFileButton_attachedFileName__Upg7n"}},34:function(e,t,a){e.exports={button:"Button_button__21ptB",success:"Button_success__3epyH"}},49:function(e,t,a){e.exports={screen:"Screen_screen__NskMt"}},50:function(e,t,a){e.exports={container:"AuthPage_container__31Gzp"}},60:function(e,t,a){},61:function(e,t,a){}},[[111,1,2]]]);
//# sourceMappingURL=main.ebba273b.chunk.js.map